# 2022年10月17日

总结一下目前情况:
> * rumor 出现的情况：零星分布(个人)、少数有组织(degree 大)。都随机生成。
> * Truth 的出现情况：大部分有组织（权威、degree 大）。目前暂时认为是固定的。
> * 谣言的检测具有滞后性，需要检测到谣言后再进行行动(如散播真相去纠正)。
> * 点具有两个阈值：influenced & correction。值越低，越容易被影响或纠正。权威Truth node 会改变其 k 阶邻居的 correction 阈值，目前有 2 种计算公式：
>> 1. $P_{correction}=P_0-\frac{P_0}{1+e^{\beta x}}$ 。默认$\beta=1$。 $\beta$ 越小，说明权威Truth node 的纠正能力越强。x 表示第 k 阶邻居，下同。
>> 2. $P_{correction} = P_0e^{- \frac{1-P_0}{x}}$ 。只与 $P_0$ 自身相关。

关于如何初始化 authoritative Truth & organized Rumor:
> * 试了一下使用 p-value 选取degree显著偏大的顶点。小一点的图，例如阈值设为 1e-7， 就还可以选出不错的结果；但图一旦变大，阈值设置到 $1e^{-100+}$ ，都会有很多点，效果不好。 *( 感觉与图的幂律分布有关 )*
> * 从高于 median/mean degree 的点中选取一部分。目前使用高于 **median degree** 的区分标准，效果还行。

# 2022年10月28日
> * 检测谣言具有滞后性，即谣言在传播一段时间后才会被检测到。处于一种"敌暗我明"的状态。

因此，除了相对固定的 authoritative Truth node，还需要预先设置一些 Monitoring T node，及早的检测到谣言，在检测到谣言后，才可以采取一些其他措施，比如封禁一些点，在某些地方设置 T node 等。

基于以上，问题初步定义为：
> 给定一个图G，n0 个 authoritative Truth nodes，n1 个（随机）的rumor nodes，在总预算 C 内，使得谣言的影响范围最小。*(如果能同时让真相的影响更大，那更好)*

# 2022年10月31日
> * 在谣言被检测到之前，部署的Monitoring T nodes，是为了尽早检测到谣言，实际上有点类似于 "影响最大化问题";
> * 在检测到谣言之后采取的行动，如封禁、传播真相等，实际上等于"谣言遏制"。
> * 本问题将两个问题结合起来。感觉可以实现真相最大化的同时，谣言的传播最小化，如给定一个预算C，部署 Monitoring T nodes 的预算为 C1，后续的行动的预算为 C2，在预算有限的情况下解决上述问题。

# 2022年11月1日
> * 扩散模型基本实现，目前还没发现什么问题
> * 需要研究一下不同网络中，平均第一次检测到谣言的时间(只有固定的几个authoritative T nodes，rumor nodes随机出现) 

# 2022年11月2日
> * 分别在4个数据集上进行了小测试，数据集分别为 dolphin、food、netscience、USpower，顶点数依次增大
> * 每个数据集模拟100次，authoritative T node选取后固定不变，比例为0.004；无other T node；R node 比例依次从 0.01 增大至 0.05. 每次模拟 R node 和阈值均重新生成。

|            | 0.01 | 0.015 | 0.02 | 0.025 | 0.03 | 0.035 | 0.04 | 0.045 | 0.05 |
| ---------- | ---- | ----- | ---- | ----- | ---- | ----- | ---- | ----- | ---- |
| dolphin    | 1.79 | 1.9   | 1.9  | 2.33  | 1.97 | 1.99  | 2.01 | 2.25  | 2.07 |
| food       | 4.86 | 5.7   | 5.69 | 5.15  | 5.51 | 5.08  | 5.41 | 5.19  | 4.52 |
| netscience | 4.24 | 4.19  | 4.45 | 4.93  | 3.82 | 4.24  | 3.91 | 3.74  | 3.59 |
| USpower    | 4.52 | 3.9   | 2.51 | 2.11  | 1.97 | 1.31  | 1.58 | 1.46  | 1.27 |

> * 上述参数不变，但authoritative T node 也随机

|            | 0.01 | 0.015 | 0.02 | 0.025 | 0.03 | 0.035 | 0.04 | 0.045 | 0.05 |
| ---------- | ---- | ----- | ---- | ----- | ---- | ----- | ---- | ----- | ---- |
| dolphin    | 2.02 | 2.24  | 2.01 | 2.31  | 2.27 | 2.43  | 2.44 | 2.32  | 2.28 |
| food       | 4.52 | 4.57  | 4.39 | 3.89  | 4.03 | 3.66  | 4.0  | 3.95  | 3.29 |
| netscience | 4.4  | 4.43  | 3.69 | 4.23  | 3.88 | 3.81  | 4.08 | 3.51  | 3.13 |
| USpower    | 5.87 | 4.22  | 3.41 | 3.13  | 1.88 | 1.9   | 1.78 | 1.43  | 1.76 |

# 2022年11月3日
> * rumor node比例不变，固定为0.05；authoritative T node比例从0.001~0.01；无other T node；每次模拟 R node 和阈值均重新生成。


|            | 0.001 | 0.002 | 0.003 | 0.004 | 0.005 | 0.006 | 0.007 | 0.008 | 0.009 | 0.01 |
| ---------- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ---- |
| dolphin    | 2.49  | 2.3   | 2.34  | 2.41  | 2.48  | 2.18  | 2.97  | 2.64  | 2.45  | 2.52 |
| food       | 3.4   | 2.93  | 3.45  | 3.33  | 3.95  | 2.14  | 1.81  | 2.0   | 1.51  | 1.87 |
| netscience | 4.23  | 4.67  | 3.01  | 3.53  | 2.68  | 2.32  | 2.26  | 2.02  | 1.58  | 1.9  |
| USpower    | 5.89  | 2.92  | 1.7   | 1.84  | 1.15  | 1.12  | 1.23  | 1.03  | 1.05  | 1.0  |

> * 总的来说，增加初始 authoritative T node的比例，可以尽早的检测到谣言；同理，随着谣言节点出现的比例上升，遇到 T node 的概率也会上升，即能更早的被检测到。
> * 下图是随着rumor node 比例升高，剩余可用节点比例变化的图：(原图为tiff，在 './res_pic'目录下，该格式无法在markdown中显示)
> ![](res_pic/avg_residual_avail_nodes_1.jpeg)


# 2022年11月4日
> * 需要比较一下：
>> 1. 预先知道谣言种子节点
>> 2. 未知谣言节点（即 T node 未探测到谣言时，对谣言节点是未知的）

# 2022年11月5日
> **已修正（2022.11.13）**
> 测试的算法：ContrId。参数设置：真相点选择比例从 0.01~0.05；谣言节点比例0.05；固定authoritative T node
> * 预先知道谣言节点：

|            | 0.01   | 0.014  | 0.018  | 0.023  | 0.027  | 0.032  | 0.036  | 0.041  | 0.045  | 0.05   |
| ---------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| dolphins   | 8.25   | 6.72   | 5.74   | 5.53   | 5.68   | 6.49   | 5.23   | 5.6    | 5.63   | 5.59   |
| food       | 81.57  | 73.88  | 69.25  | 65.84  | 59.16  | 60.92  | 58.94  | 55.11  | 56.89  | 54.34  |
| netscience | 166.6  | 156.93 | 150.02 | 141.61 | 138.39 | 134.21 | 129.3  | 127.09 | 125.93 | 126.56 |
| USpower    | 583.15 | 531.6  | 502.39 | 482.63 | 459.03 | 449.56 | 424.91 | 412.35 | 397.12 | 384.32 |

> * 未知谣言节点（谣言被检测到之前是未知的）

|            | 0.01    | 0.014   | 0.018  | 0.023   | 0.027   | 0.032   | 0.036   | 0.041   | 0.045   | 0.05    |
| ---------- | ------- | ------- | ------ | ------- | ------- | ------- | ------- | ------- | ------- | ------- |
| dolphins   | 10.648  | 10.51   | 10.878 | 10.45   | 9.69    | 10.122  | 9.512   | 9.68    | 9.504   | 9.282   |
| food       | 104.992 | 103.614 | 97.818 | 96.878  | 94.778  | 90.908  | 91.532  | 89.12   | 88.808  | 85.006  |
| netscience | 210.652 | 208.866 | 206.22 | 208.812 | 206.696 | 208.098 | 203.18  | 206.552 | 206.372 | 204.38  |
| USpower    | 653.31  | 636.28  | 607.86 | 592.08  | 585.334 | 580.076 | 577.892 | 576.926 | 577.682 | 573.976 |

# 2022年11月10日
> **已修正（2022.11.13）**
> 测试算法：ContrId。参数设置同 11月5日。比较最终 T nodes 的规模差距
> * 预先知道谣言节点：

|            | 0.01   | 0.014  | 0.018  | 0.023 | 0.027  | 0.032  | 0.036  | 0.041  | 0.045  | 0.05   |
| ---------- | ------ | ------ | ------ | ----- | ------ | ------ | ------ | ------ | ------ | ------ |
| dolphins   | 7.74   | 6.99   | 9.41   | 10.65 | 10.26  | 11.21  | 13.15  | 13.47  | 12.68  | 12.19  |
| food       | 51.0   | 54.51  | 61.5   | 69.09 | 79.55  | 78.61  | 83.75  | 91.14  | 99.37  | 101.92 |
| netscience | 49.9   | 59.25  | 66.09  | 74.52 | 80.79  | 82.36  | 91.53  | 99.09  | 103.86 | 110.89 |
| USpower    | 223.25 | 264.63 | 300.07 | 325.3 | 348.83 | 369.55 | 387.79 | 405.97 | 431.69 | 458.4  |

> * 未知谣言节点（谣言被检测到之前是未知的）

|            | 0.01   | 0.014  | 0.018 | 0.023  | 0.027 | 0.032  | 0.036  | 0.041  | 0.045  | 0.05   |
| ---------- | ------ | ------ | ----- | ------ | ----- | ------ | ------ | ------ | ------ | ------ |
| dolphins   | 6.07   | 6.1    | 9.04  | 8.91   | 8.88  | 9.1    | 10.86  | 12.04  | 12.89  | 11.33  |
| food       | 25.23  | 40.55  | 49.19 | 62.56  | 64.21 | 74.89  | 80.03  | 84.96  | 92.42  | 106.76 |
| netscience | 28.36  | 34.99  | 41.73 | 47.75  | 56.46 | 69.44  | 81.66  | 92.64  | 101.23 | 109.09 |
| USpower    | 158.42 | 184.86 | 204.4 | 243.39 | 267.1 | 300.47 | 326.72 | 349.53 | 370.52 | 400.11 |

# 2022年11月11日
> **TCS数据有误**
> 比较算法 ：ContrId & TCS & unblocking
> 参数设置：同 11月10日。
> 都为未知谣言节点

* 平均最终谣言节点

|            |            | 0.01   | 0.014  | 0.018  | 0.023  | 0.027  | 0.032   | 0.036   | 0.041   | 0.045   | 0.05    |
| ---------- | ---------- | ------ | ------ | ------ | ------ | ------ | ------- | ------- | ------- | ------- | ------- |
| dolphions  | ContrId    | 14.78  | 16.08  | 14.62  | 14.97  | 14.73  | 14.89   | 18.22   | 18.77   | 16.58   | 18.58   |
| ^          | TCS        | 13.91  | 14.53  | 13.36  | 13.1   | 14.61  | 14.76   | 14.18   | 14.61   | 16.13   | 16.2    |
| ^          | unblocking | 11.42  | 13.68  | 12.32  | 14.14  | 12.36  | 10.9    | 11.2    | 11.46   | 11.49   | 10.67   |
| food       | ContrId    | 124.06 | 119.31 | 124.46 | 132.07 | 134.38 | 136.27  | 148.59  | 150.79  | 149.22  | 157.9   |
| ^          | TCS        | 156.28 | 159.1  | 165.8  | 177.88 | 169.82 | 169.47  | 180.11  | 175.54  | 182.45  | 179.6   |
| ^          | unblocking | 146.53 | 149.04 | 138.14 | 157.18 | 160.16 | 151.3   | 149.17  | 154.17  | 144.05  | 151.69  |
| netscience | ContrId    | 202.14 | 201.42 | 202.88 | 198.72 | 200.19 | 201.67  | 207.13  | 212.98  | 219.45  | 222.71  |
| ^          | TCS        | 247.29 | 251.12 | 262.61 | 268.61 | 275.68 | 285.56  | 291.38  | 305.59  | 305.25  | 314.47  |
| ^          | unblocking | 224.66 | 224.99 | 221.36 | 225.39 | 220.97 | 224.41  | 224.89  | 225.16  | 220.06  | 223.23  |
| USpower    | ContrId    | 716.03 | 694.42 | 678.85 | 665.34 | 665.63 | 673.08  | 681.89  | 695.69  | 693.31  | 698.77  |
| ^          | TCS        | 875.14 | 907.33 | 954.64 | 967.74 | 999.32 | 1043.81 | 1064.68 | 1091.98 | 1120.22 | 1149.28 |
| ^          | unblocking | 796.96 | 794.18 | 799.56 | 802.52 | 794.87 | 800.33  | 794.78  | 791.78  | 798.07  | 794.97  |

* 平均最终真相节点


|            |            | 0.01   | 0.014 | 0.018  | 0.023  | 0.027  | 0.032  | 0.036  | 0.041  | 0.045  | 0.05   |
| ---------- | ---------- | ------ | ----- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| dolphions  | ContrId    | 3.81   | 4.23  | 4.41   | 5.02   | 4.69   | 4.6    | 4.89   | 5.57   | 5.59   | 5.22   |
| ^          | TCS        | 4.22   | 3.84  | 4.6    | 5.11   | 5.08   | 4.76   | 5.4    | 6.19   | 5.61   | 5.87   |
| ^          | unblocking | 3.76   | 2.64  | 2.96   | 3.93   | 3.13   | 3.88   | 3.12   | 3.6    | 3.61   | 3.24   |
| food       | ContrId    | 47.41  | 46.82 | 48.37  | 49.19  | 52.09  | 56.32  | 56.44  | 57.76  | 62.43  | 62.41  |
| ^          | TCS        | 8.79   | 10.65 | 13.19  | 14.74  | 18.64  | 20.17  | 21.67  | 25.07  | 26.31  | 28.92  |
| ^          | unblocking | 3.89   | 3.85  | 3.26   | 3.42   | 3.29   | 3.67   | 2.86   | 2.81   | 3.31   | 3.62   |
| netscience | ContrId    | 87.32  | 93.99 | 99.93  | 102.73 | 109.57 | 114.24 | 120.15 | 123.65 | 130.92 | 132.02 |
| ^          | TCS        | 19.93  | 25.21 | 31.73  | 36.72  | 43.39  | 47.9   | 53.49  | 59.19  | 64.52  | 70.44  |
| ^          | unblocking | 6.46   | 7.5   | 6.75   | 6.47   | 7.39   | 6.47   | 6.15   | 6.88   | 7.56   | 8.13   |
| USpower    | ContrId    | 329.16 | 348.7 | 369.67 | 385.59 | 404.64 | 422.87 | 439.76 | 458.73 | 476.05 | 497.64 |
| ^          | TCS        | 72.8   | 91.13 | 111.71 | 130.73 | 149.82 | 168.84 | 187.82 | 207.95 | 226.11 | 244.48 |
| ^          | unblocking | 29.9   | 29.39 | 28.74  | 28.02  | 29.85  | 29.32  | 29.19  | 27.76  | 29.58  | 28.92  |

* 平均传播时间


|            |            | 0.01  | 0.014 | 0.018 | 0.023 | 0.027 | 0.032 | 0.036 | 0.041 | 0.045 | 0.05  |
| ---------- | ---------- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- |
| dolphions  | ContrId    | 5.69  | 5.99  | 5.64  | 5.81  | 5.43  | 5.99  | 6.06  | 6.47  | 5.89  | 6.32  |
| ^          | TCS        | 5.65  | 5.21  | 5.66  | 5.46  | 5.76  | 6.16  | 5.88  | 6.22  | 6.09  | 6.36  |
| ^          | unblocking | 5.28  | 5.29  | 5.07  | 5.84  | 5.53  | 5.12  | 5.23  | 5.15  | 5.26  | 5.39  |
| food       | ContrId    | 6.19  | 6.06  | 5.9   | 5.98  | 6.21  | 5.92  | 6.2   | 6.03  | 6.31  | 6.14  |
| ^          | TCS        | 9.27  | 9.48  | 9.37  | 9.77  | 9.9   | 10.05 | 9.89  | 9.5   | 10.36 | 10.09 |
| ^          | unblocking | 8.31  | 8.39  | 7.89  | 8.91  | 8.68  | 8.56  | 8.39  | 8.32  | 8.11  | 7.96  |
| netscience | ContrId    | 6.1   | 5.9   | 5.96  | 5.94  | 5.86  | 5.68  | 6.07  | 6.03  | 6.03  | 6.18  |
| ^          | TCS        | 7.65  | 8.27  | 8.35  | 8.29  | 8.43  | 8.48  | 8.85  | 8.84  | 8.82  | 8.44  |
| ^          | unblocking | 7.32  | 7.62  | 7.2   | 7.24  | 7.44  | 7.5   | 7.13  | 7.38  | 7.26  | 7.56  |
| USpower    | ContrId    | 8.91  | 8.58  | 8.62  | 8.21  | 8.53  | 8.93  | 8.6   | 8.71  | 8.63  | 8.54  |
| ^          | TCS        | 10.63 | 10.79 | 11.37 | 11.72 | 11.49 | 11.36 | 11.21 | 11.49 | 11.21 | 11.46 |
| ^          | unblocking | 10.25 | 10.16 | 10.2  | 10.58 | 10.56 | 10.73 | 10.76 | 10.31 | 10.4  | 10.39 |

* 100次运行时间

|            |         | running time |
| ---------- | ------- | ------------ |
| dolphins   | ContrId | 2.8s         |
| ^          | TCS     | 2.7s         |
| food       | ContrId | 42.6s        |
| ^          | TCS     | 1m53.7s      |
| netscience | ContrId | 42.9s        |
| ^          | TCS     | 5m27.6s      |
| USpower    | ContrId | 2m29.5s      |
| ^          | TCS     | 49m30.2s     |

# 2022年11月12日
> 根据昨天的运行结果，随着网络的增大，TCS的效果也逐渐变差，只有最终真相节点的数量比较接近。
> 可能的原因：
> 1. TCS可能是不太适合本模型使用;
> 2. 实际上我不是一次性运行的，jupyter重启了几次，因此 model 的 authoritative T nodes 不一致，导致结果有差异。但之前的实验显示是否随机 authoritative T nodes，差距不是很明显。但还是重新跑一次全随机的看看。
> 3. TCS代码可能存在bug。
> 
> 此外，TCS的运行时间比预想的慢很多。通过line_profiler分析，主要费时在 `np.exp()` 函数上。换成 `math.exp()` 就好很多。
> * 代码错误修复：
>> 1. 感觉实验结果很怪。检查了一下传播模型，发现函数 `after_detected_diffusion` 中新添加的 `T_node` 初始化时，初始成了错误的类型，导致增加了真相节点的比列，谣言节点的数量还在增加的错误结果。
>> 2. TCS算法修复。
>
> **因此，11月4日至11月10日的实验，结果数据都有误。**

# 2022年11月13日
> 根据11月12日分析结果，重新进行实验。实验参数设置同11月11日，每次authoritative T nodes 随机生成，都未知谣言节点

* 平均最终谣言节点数量

|            |            | 0.01   | 0.014  | 0.018  | 0.023  | 0.027  | 0.032  | 0.036  | 0.041  | 0.045  | 0.05   |
| ---------- | ---------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| dolphins   | Contrid    | 11.04  | 11.45  | 10.03  | 10.47  | 9.08   | 8.64   | 10.4   | 9.2    | 9.15   | 10.03  |
| ^          | TCS        | 11.46  | 10.88  | 12.42  | 11.02  | 11.88  | 10.78  | 12.59  | 11.48  | 10.69  | 11.43  |
| ^          | unblocking | 12.6   | 10.5   | 12.19  | 12.1   | 11.16  | 12.02  | 12.3   | 10.53  | 12.47  | 11.74  |
| food       | ContrId    | 94.88  | 88.61  | 83.56  | 77.76  | 80.45  | 76.24  | 74.32  | 75.5   | 75.52  | 73.46  |
| ^          | TCS        | 144.26 | 143.06 | 150.56 | 148.24 | 148.44 | 144.3  | 139.51 | 141.3  | 143.0  | 140.2  |
| ^          | unblocking | 148.12 | 147.53 | 147.82 | 142.6  | 153.33 | 151.49 | 145.46 | 151.1  | 159.23 | 143.05 |
| netscience | ContrId    | 181.84 | 180.35 | 181.47 | 178.99 | 176.82 | 177.99 | 177.33 | 177.59 | 176.92 | 175.65 |
| ^          | TCS        | 226.41 | 223.27 | 219.24 | 220.68 | 221.4  | 221.6  | 220.77 | 220.6  | 219.26 | 221.8  |
| ^          | unblocking | 223.74 | 224.44 | 223.59 | 223.62 | 227.96 | 223.78 | 223.35 | 220.61 | 226.25 | 224.84 |
| USpower    | ContrId    | 610.56 | 592.94 | 561.39 | 546.03 | 544.31 | 532.79 | 526.29 | 525.92 | 524.16 | 526.25 |
| ^          | TCS        | 795.61 | 788.4  | 782.13 | 787.5  | 782.23 | 765.55 | 775.25 | 768.43 | 770.53 | 756.29 |
| ^          | unblocking | 793.82 | 802.91 | 811.54 | 798.69 | 794.72 | 790.62 | 786.93 | 807.95 | 798.91 | 794.85 |


* 平均最终真相节点数量

|            |            | 0.01   | 0.014  | 0.018  | 0.023  | 0.027  | 0.032  | 0.036  | 0.041  | 0.045  | 0.05   |
| ---------- | ---------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| dolphins   | Contrid    | 6.89   | 5.97   | 8.24   | 9.13   | 9.42   | 9.51   | 10.97  | 12.0   | 13.48  | 11.76  |
| ^          | TCS        | 6.54   | 4.74   | 6.38   | 6.93   | 6.69   | 7.74   | 7.86   | 7.86   | 7.61   | 9.02   |
| ^          | unblocking | 3.63   | 3.4    | 4.44   | 3.89   | 3.42   | 3.12   | 4.27   | 3.03   | 3.58   | 3.28   |
| food       | ContrId    | 73.11  | 80.19  | 81.91  | 100.07 | 99.6   | 104.97 | 116.07 | 126.73 | 133.39 | 144.08 |
| ^          | TCS        | 13.55  | 16.5   | 21.41  | 24.31  | 29.07  | 31.57  | 35.05  | 38.89  | 43.42  | 49.0   |
| ^          | unblocking | 3.15   | 2.73   | 3.32   | 2.85   | 3.53   | 3.2    | 2.73   | 3.54   | 3.05   | 3.2    |
| netscience | ContrId    | 102.42 | 110.84 | 116.78 | 120.41 | 125.87 | 133.89 | 147.07 | 158.56 | 163.78 | 178.98 |
| ^          | TCS        | 38.81  | 52.3   | 67.04  | 80.31  | 94.7   | 103.2  | 118.49 | 130.12 | 143.61 | 152.03 |
| ^          | unblocking | 6.93   | 7.72   | 7.27   | 7.27   | 7.03   | 7.57   | 7.21   | 6.76   | 7.0    | 6.81   |
| USpower    | ContrId    | 426.43 | 453.15 | 481.17 | 504.24 | 527.56 | 560.61 | 589.17 | 614.78 | 642.34 | 665.2  |
| ^          | TCS        | 137.42 | 187.54 | 226.56 | 280.51 | 322.09 | 365.77 | 407.06 | 452.02 | 493.94 | 546.07 |
| ^          | unblocking | 29.92  | 29.27  | 29.54  | 29.13  | 30.4   | 29.04  | 30.33  | 28.98  | 30.52  | 29.21  |

* 平均传播时间

|            |            | 0.01  | 0.014 | 0.018 | 0.023 | 0.027 | 0.032 | 0.036 | 0.041 | 0.045 | 0.05  |
| ---------- | ---------- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- |
| dolphins   | Contrid    | 5.89  | 6.39  | 6.47  | 5.82  | 6.84  | 6.68  | 6.62  | 7.55  | 6.57  | 7.08  |
| ^          | TCS        | 5.84  | 5.06  | 5.87  | 5.48  | 5.77  | 5.63  | 6.04  | 5.68  | 5.27  | 5.79  |
| ^          | unblocking | 5.47  | 5.15  | 5.15  | 5.55  | 5.44  | 5.33  | 5.28  | 5.52  | 5.42  | 5.47  |
| food       | ContrId    | 7.27  | 7.82  | 8.04  | 7.82  | 7.43  | 8.81  | 8.42  | 8.02  | 8.04  | 8.75  |
| ^          | TCS        | 8.76  | 8.64  | 9.19  | 9.11  | 9.17  | 8.9   | 8.5   | 8.55  | 8.55  | 9.37  |
| ^          | unblocking | 8.8   | 8.29  | 8.69  | 8.72  | 9.14  | 8.79  | 8.86  | 8.88  | 8.55  | 8.83  |
| netscience | ContrId    | 5.39  | 5.09  | 5.14  | 5.12  | 5.34  | 5.96  | 5.82  | 6.17  | 6.19  | 6.25  |
| ^          | TCS        | 8.05  | 8.09  | 8.04  | 8.18  | 8.24  | 9.05  | 8.34  | 7.83  | 8.68  | 8.71  |
| ^          | unblocking | 7.06  | 7.32  | 7.13  | 7.0   | 7.81  | 6.94  | 7.02  | 7.43  | 7.15  | 6.97  |
| USpower    | ContrId    | 7.3   | 7.25  | 7.25  | 7.43  | 6.64  | 7.26  | 7.44  | 8.03  | 7.66  | 7.83  |
| ^          | TCS        | 10.38 | 10.93 | 10.19 | 10.45 | 10.81 | 10.79 | 10.58 | 10.73 | 10.58 | 10.61 |
| ^          | unblocking | 10.34 | 10.7  | 10.76 | 10.27 | 9.95  | 10.61 | 10.7  | 10.47 | 10.09 | 10.41 |

* TCS 与 ContrId 在选择 T nodes 时的比较

![](res_pic/T_node_select_cmp_1.png)

> 综合以上实验结果，在本模型中：
> * TCS算法对谣言的遏制纠正效果比ContrId要差，最终真相节点的数量也比ContrId要少。
> * TCS与unblocking相比，可以说TCS的抑制效果微弱。
> * 在初次检测到谣言时，各算法对 T nodes 选择的有所差异。图中红色的点表示 T node，黄色的点表示 R node。TCS 选择的 T node 很分散， 常在网络的边缘处出现；ContrId 选择的 T node 比较集中，分布在 R node 的高发地区。
> 
> 在修复完模型与算法的错误后，TCS的效果仍不理想，说明确实与模型的关系很大。未来对模型进行丰富时，也许TCS的效果会提升。

# 2022年11月14日
> 补充了一个基于顶点度的算法，即按顶点度的大小降序排序，选前 k 个点作为 T nodes。
> 参数设置与其他算法实验结果沿用11月13日。

* 平均最终谣言节点数量

|            |            | 0.01   | 0.014  | 0.018  | 0.023  | 0.027  | 0.032  | 0.036  | 0.041  | 0.045  | 0.05   |
| ---------- | ---------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| dolphins   | Contrid    | 11.04  | 11.45  | 10.03  | 10.47  | 9.08   | 8.64   | 10.4   | 9.2    | 9.15   | 10.03  |
| ^          | TCS        | 11.46  | 10.88  | 12.42  | 11.02  | 11.88  | 10.78  | 12.59  | 11.48  | 10.69  | 11.43  |
| ^          | degree     | 11.31  | 11.59  | 10.32  | 10.98  | 9.34   | 10.91  | 10.62  | 10.14  | 12.15  | 9.7    |
| ^          | unblocking | 12.6   | 10.5   | 12.19  | 12.1   | 11.16  | 12.02  | 12.3   | 10.53  | 12.47  | 11.74  |
| food       | ContrId    | 94.88  | 88.61  | 83.56  | 77.76  | 80.45  | 76.24  | 74.32  | 75.5   | 75.52  | 73.46  |
| ^          | TCS        | 144.26 | 143.06 | 150.56 | 148.24 | 148.44 | 144.3  | 139.51 | 141.3  | 143.0  | 140.2  |
| ^          | degree     | 123.54 | 125.62 | 129.09 | 111.6  | 124.42 | 104.95 | 114.95 | 107.53 | 107.25 | 104.67 |
| ^          | unblocking | 148.12 | 147.53 | 147.82 | 142.6  | 153.33 | 151.49 | 145.46 | 151.1  | 159.23 | 143.05 |
| netscience | ContrId    | 181.84 | 180.35 | 181.47 | 178.99 | 176.82 | 177.99 | 177.33 | 177.59 | 176.92 | 175.65 |
| ^          | TCS        | 226.41 | 223.27 | 219.24 | 220.68 | 221.4  | 221.6  | 220.77 | 220.6  | 219.26 | 221.8  |
| ^          | degree     | 216.81 | 216.06 | 217.24 | 213.61 | 216.86 | 206.32 | 211.3  | 210.82 | 206.89 | 205.93 |
| ^          | unblocking | 223.74 | 224.44 | 223.59 | 223.62 | 227.96 | 223.78 | 223.35 | 220.61 | 226.25 | 224.84 |
| USpower    | ContrId    | 610.56 | 592.94 | 561.39 | 546.03 | 544.31 | 532.79 | 526.29 | 525.92 | 524.16 | 526.25 |
| ^          | TCS        | 795.61 | 788.4  | 782.13 | 787.5  | 782.23 | 765.55 | 775.25 | 768.43 | 770.53 | 756.29 |
| ^          | degree     | 770.43 | 766.43 | 753.95 | 749.8  | 732.97 | 730.04 | 731.1  | 717.9  | 721.9  | 716.31 |
| ^          | unblocking | 793.82 | 802.91 | 811.54 | 798.69 | 794.72 | 790.62 | 786.93 | 807.95 | 798.91 | 794.85 |


* 平均最终真相节点数量

|            |            | 0.01   | 0.014  | 0.018  | 0.023  | 0.027  | 0.032  | 0.036  | 0.041  | 0.045   | 0.05    |
| ---------- | ---------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------- | ------- |
| dolphins   | Contrid    | 6.89   | 5.97   | 8.24   | 9.13   | 9.42   | 9.51   | 10.97  | 12.0   | 13.48   | 11.76   |
| ^          | TCS        | 6.54   | 4.74   | 6.38   | 6.93   | 6.69   | 7.74   | 7.86   | 7.86   | 7.61    | 9.02    |
| ^          | degree     | 8.54   | 7.96   | 11.47  | 12.88  | 12.29  | 13.48  | 14.61  | 16.43  | 15.88   | 17.34   |
| ^          | unblocking | 3.63   | 3.4    | 4.44   | 3.89   | 3.42   | 3.12   | 4.27   | 3.03   | 3.58    | 3.28    |
| food       | ContrId    | 73.11  | 80.19  | 81.91  | 100.07 | 99.6   | 104.97 | 116.07 | 126.73 | 133.39  | 144.08  |
| ^          | TCS        | 13.55  | 16.5   | 21.41  | 24.31  | 29.07  | 31.57  | 35.05  | 38.89  | 43.42   | 49.0    |
| ^          | degree     | 90.39  | 118.14 | 125.56 | 152.6  | 156.23 | 180.79 | 169.95 | 189.63 | 196.85  | 206.5   |
| ^          | unblocking | 3.15   | 2.73   | 3.32   | 2.85   | 3.53   | 3.2    | 2.73   | 3.54   | 3.05    | 3.2     |
| netscience | ContrId    | 102.42 | 110.84 | 116.78 | 120.41 | 125.87 | 133.89 | 147.07 | 158.56 | 163.78  | 178.98  |
| ^          | TCS        | 38.81  | 52.3   | 67.04  | 80.31  | 94.7   | 103.2  | 118.49 | 130.12 | 143.61  | 152.03  |
| ^          | degree     | 85.08  | 92.5   | 108.39 | 134.74 | 163.51 | 188.56 | 209.78 | 223.01 | 244.98  | 255.3   |
| ^          | unblocking | 6.93   | 7.72   | 7.27   | 7.27   | 7.03   | 7.57   | 7.21   | 6.76   | 7.0     | 6.81    |
| USpower    | ContrId    | 426.43 | 453.15 | 481.17 | 504.24 | 527.56 | 560.61 | 589.17 | 614.78 | 642.34  | 665.2   |
| ^          | TCS        | 137.42 | 187.54 | 226.56 | 280.51 | 322.09 | 365.77 | 407.06 | 452.02 | 493.94  | 546.07  |
| ^          | degree     | 356.36 | 472.11 | 581.94 | 668.59 | 764.95 | 861.66 | 934.32 | 1025.4 | 1092.14 | 1175.77 |
| ^          | unblocking | 29.92  | 29.27  | 29.54  | 29.13  | 30.4   | 29.04  | 30.33  | 28.98  | 30.52   | 29.21   |

* 平均传播时间

|            |            | 0.01  | 0.014 | 0.018 | 0.023 | 0.027 | 0.032 | 0.036 | 0.041 | 0.045 | 0.05  |
| ---------- | ---------- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- |
| dolphins   | Contrid    | 5.89  | 6.39  | 6.47  | 5.82  | 6.84  | 6.68  | 6.62  | 7.55  | 6.57  | 7.08  |
| ^          | TCS        | 5.84  | 5.06  | 5.87  | 5.48  | 5.77  | 5.63  | 6.04  | 5.68  | 5.27  | 5.79  |
| ^          | degree     | 6.13  | 5.78  | 6.12  | 6.18  | 6.26  | 6.31  | 6.61  | 6.3   | 6.36  | 6.36  |
| ^          | unblocking | 5.47  | 5.15  | 5.15  | 5.55  | 5.44  | 5.33  | 5.28  | 5.52  | 5.42  | 5.47  |
| food       | ContrId    | 7.27  | 7.82  | 8.04  | 7.82  | 7.43  | 8.81  | 8.42  | 8.02  | 8.04  | 8.75  |
| ^          | TCS        | 8.76  | 8.64  | 9.19  | 9.11  | 9.17  | 8.9   | 8.5   | 8.55  | 8.55  | 9.37  |
| ^          | degree     | 9.14  | 9.91  | 9.77  | 10.26 | 10.44 | 9.53  | 9.81  | 9.38  | 9.6   | 9.82  |
| ^          | unblocking | 8.8   | 8.29  | 8.69  | 8.72  | 9.14  | 8.79  | 8.86  | 8.88  | 8.55  | 8.83  |
| netscience | ContrId    | 5.39  | 5.09  | 5.14  | 5.12  | 5.34  | 5.96  | 5.82  | 6.17  | 6.19  | 6.25  |
| ^          | TCS        | 8.05  | 8.09  | 8.04  | 8.18  | 8.24  | 9.05  | 8.34  | 7.83  | 8.68  | 8.71  |
| ^          | degree     | 8.95  | 8.05  | 9.24  | 8.76  | 9.33  | 8.33  | 8.95  | 8.26  | 8.44  | 8.41  |
| ^          | unblocking | 7.06  | 7.32  | 7.13  | 7.0   | 7.81  | 6.94  | 7.02  | 7.43  | 7.15  | 6.97  |
| USpower    | ContrId    | 7.3   | 7.25  | 7.25  | 7.43  | 6.64  | 7.26  | 7.44  | 8.03  | 7.66  | 7.83  |
| ^          | TCS        | 10.38 | 10.93 | 10.19 | 10.45 | 10.81 | 10.79 | 10.58 | 10.73 | 10.58 | 10.61 |
| ^          | degree     | 10.37 | 10.72 | 10.47 | 10.39 | 10.2  | 10.27 | 10.61 | 10.35 | 10.07 | 10.29 |
| ^          | unblocking | 10.34 | 10.7  | 10.76 | 10.27 | 9.95  | 10.61 | 10.7  | 10.47 | 10.09 | 10.41 |

* degree based 算法选择的T node 分布
![](res_pic/T_nodes_select_0.png)

> 基于顶点度的算法，对谣言抑制效果一般，但对真相扩散的效果不错。


# 2022年11月15日
**关于谣言节点数量与监测点的选择**
> * 固定数值类
> > 1. 不论网络规模大小，都取同样数量范围的谣言节点，如[1，10]
> > 2. 仅在相对较大网络上进行实验，也取同样数量范围的谣言节点，如[50，800]
> > 
> > 存在的问题：对于小网络来说太多，对于大网络来说太少
> * 比例类
> > 1. 固定比例，如 0.2% 。
> >
> > 存在问题：对于小网络来说太少，比如 0.2%，对于5000个点的网络，也只取了10个点。
> 
> 能否试一试动态比例？比如小网络取 1~5% 的点为谣言节点，大网络取 0.1~1% 的点？

先按比例类的方法试试，谣言比例从 0.1~1%。结果如下：
![](res_pic/deg_based_select_M_T.jpg)
> 对于小网络，如 dolphins 和 food ， 由于谣言节点太少|谣言都不一定能传播，因此得到的结果并不一定是第一次检测到的时间，也包含了谣言传播停止的时间，不是很准确。

其他谣言的比例，以netscience为例，谣言比例 0.4~4%。结果如下：
![](res_pic/deg_based_select_M_T_3d_3.jpg)
还算正常，大约 0.6~0.7% 左右的 monitoring T 节点就可较早检测到谣言。但小网络的谣言比例还不太确定。需要明天进一步研究。

# 2022年11月16日
小网络的谣言比例从 5~10%，monitoring T 比例从 5~10%，结果如下：
![](res_pic/deg_based_select_M_T_3d_1.jpg)
在小网络中，如果基于顶点度选择 monitoring T，大约需要 7% 的点才能较早监测到谣言; 10% 点才能立马检测到。

对于随机选择 Monitoring T，效果还行|以 food 网络为例：
![](res_pic/rand_select_M_T_3d_2.jpg)

下图是在 netscience 上随机选择 monitoring T，谣言、真相的比例都为 0.1~1%.
![](res_pic/rand_select_M_T_3d_3.jpg)
可以看到结果有点反常。0.1% 的谣言节点太少，根本无法传播，因此得到的结果是谣言停止传播的时间，而不是检测到谣言的时间。根据结果，以0.6%的谣言节点为起点比较合适。
修改比例后结果如下：
![](res_pic/rand_select_M_T_3d_3_v2.jpg)

> 综合这几天实验，也发现了存在的问题：当谣言节点数量稀少，还未被监测节点检测到就已经停止传播，使得第一次检测到谣言的时间偏低，不符合实际。
> 解决方法：
> 1. 随机在 inactive 处，生成 1 个 R-active，继续传播。若监测到谣言，则停止，否则继续生成 R-active 节点。
> 2. 直接给传播时间加一个常数，如 +10。
> 3. 维持现状。

# 2022年11月17日
> 文章title初步命名为:Rumor correction and truth spreading in social network with time delay
> 算法分两步：
> 1. 布置 monitoring T nodes，对待选点的周围进行采样，采样范围 2~3 阶邻居，用 entropy 进行评估。
> 2. 监测到谣言后布置纠正 T nodes。由于检测到谣言时，一定存在这样的结构：T ---- R。因此寻找这样的一个 motif：T ---- R ----- I， 令 I 成为 T node。
> 
> 回答昨天的问题：决定采取方案2，加一个常数6，根据是六度分隔理论，即一个谣言节点若能一直传播到 authoritative T node 处，最多经过6个人。

# 2022年11月18日
> 经过修改后，对于随机选取 monitoring T，小的网络结果变化不大，反而是大网络的变化比较大。下图是 USpower 网络上的结果：

![](res_pic/rand_select_M_T_3d_4_v2.jpg)

> 在USpower网络上，基于度选取 monitoring T 的结果：

![](res_pic/deg_based_select_M_T_3d_4_v2.jpg)
> 和原版的结果差不多，趋势一致，只是检测时间上升了。

# 2022年11月19日
> 实现基于 propagation entropy 来选取 monitoring T nodes。
> 对于平均第一次检测时间，效果不低于 degree based 的算法，在一些图上的效果还略高。

> 下图是food网络上的结果:

![](res_pic/PE_select_M_T_3d_2.jpg)

![](res_pic/deg_based_select_M_T_3d_2_v2.jpg)

> USpower网络上的结果，可以看到，比昨天的要好

![](res_pic/PE_select_M_T_3d_4.jpg)

# 2022年11月21日
> 实现基于 motif-3 结构，即 T--R--T 的结构来选取 other T nodes。效果不错。
> 以下结果均是未设置 monitoring T nodes

> * dolphins网络。参数：au_T_rate=0.005; r_rate=0.1; T_rate=0.1~0.2.

平均最终谣言节点数量

|         | 0.1   | 0.11  | 0.12  | 0.13  | 0.14  | 0.15  | 0.16  | 0.17  | 0.18  | 0.2   |
| ------- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- |
| degree  | 19.33 | 17.66 | 17.56 | 17.56 | 17.22 | 16.94 | 16.99 | 16.37 | 17.67 | 16.47 |
| contrid | 15.88 | 15.77 | 16.8  | 16.76 | 14.77 | 15.24 | 14.81 | 14.44 | 15.97 | 15.31 |
| motif-3 | 17.31 | 18.55 | 16.53 | 16.72 | 16.06 | 14.71 | 14.16 | 14.09 | 14.06 | 13.64 |

平均最终真相节点数量

|         | 0.1   | 0.11  | 0.12  | 0.13  | 0.14  | 0.15  | 0.16  | 0.17  | 0.18  | 0.2   |
| ------- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- |
| degree  | 17.05 | 20.23 | 20.11 | 22.71 | 23.81 | 25.1  | 25.78 | 27.34 | 27.28 | 28.28 |
| contrid | 12.05 | 13.19 | 12.72 | 14.31 | 16.7  | 16.95 | 17.07 | 18.8  | 19.44 | 20.22 |
| motif-3 | 14.38 | 14.44 | 17.45 | 17.82 | 21.3  | 21.07 | 23.34 | 23.8  | 24.77 | 27.12 |

平均传播时间

|         | 0.1  | 0.11 | 0.12 | 0.13 | 0.14 | 0.15 | 0.16 | 0.17 | 0.18 | 0.2  |
| ------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| degree  | 6.63 | 6.84 | 6.12 | 7.22 | 6.67 | 6.16 | 6.54 | 6.95 | 6.46 | 7.15 |
| contrid | 5.71 | 6.07 | 5.66 | 5.88 | 6.26 | 5.89 | 5.88 | 5.82 | 6.55 | 5.82 |
| motif-3 | 6.48 | 6.02 | 7.24 | 6.32 | 7.06 | 6.61 | 6.18 | 6.82 | 6.38 | 6.22 |

> * food网络。参数：au_T_rate=0.005; r_rate=0.05; T_rate=0.01~0.05.


平均最终谣言节点数量
|         | 0.01   | 0.0144 | 0.0188 | 0.0233 | 0.0277 | 0.0322 | 0.0366 | 0.0411 | 0.0455 | 0.05   |
| ------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| degree  | 126.11 | 116.86 | 111.28 | 113.83 | 119.56 | 106.85 | 105.37 | 109.19 | 110.69 | 109.55 |
| contrid | 123.6  | 117.57 | 119.13 | 115.61 | 110.46 | 102.67 | 113.05 | 110.55 | 105.78 | 110.97 |
| motif-3 | 134.75 | 121.54 | 126.31 | 114.01 | 108.92 | 111.06 | 107.41 | 101.99 | 95.56  | 98.92  |


平均最终真相节点数量
|         | 0.01  | 0.0144 | 0.0188 | 0.0233 | 0.0277 | 0.0322 | 0.0366 | 0.0411 | 0.0455 | 0.05   |
| ------- | ----- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| degree  | 79.18 | 111.05 | 134.64 | 144.84 | 150.1  | 171.39 | 182.65 | 185.01 | 185.15 | 199.65 |
| contrid | 22.13 | 30.69  | 48.85  | 62.35  | 66.14  | 73.69  | 80.16  | 87.65  | 93.14  | 97.44  |
| motif-3 | 58.7  | 75.55  | 78.5   | 107.01 | 121.06 | 131.77 | 146.48 | 166.87 | 188.8  | 191.51 |


平均传播时间
|         | 0.01  | 0.0144 | 0.0188 | 0.0233 | 0.0277 | 0.0322 | 0.0366 | 0.0411 | 0.0455 | 0.05  |
| ------- | ----- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ----- |
| degree  | 11.72 | 11.73  | 11.78  | 12.61  | 12.86  | 11.88  | 12.15  | 11.45  | 11.11  | 11.54 |
| contrid | 9.71  | 10.17  | 9.58   | 10.66  | 9.46   | 8.94   | 10.26  | 10.22  | 10.77  | 11.53 |
| motif-3 | 12.6  | 12.04  | 10.84  | 12.16  | 12.08  | 12.08  | 11.82  | 11.14  | 12.36  | 10.62 |

# 2022年11月22日
> 接续昨天实验。均未设置 monitoring T nodes。
> 修复一个bug: 修复导致 TCS 算法效果低于预期的bug。*(之前好像已经修复了，但可能修改错了文件...)*

> * netscience网络。参数设置：au_T_rate = 0.005; r_rate=0.05; T_rate=0.01~0.05.

平均最终谣言节点数量
|         | 0.01   | 0.0144 | 0.0188 | 0.0233 | 0.0277 | 0.0322 | 0.0366 | 0.0411 | 0.0455 | 0.05   |
| ------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| degree  | 213.02 | 214.99 | 211.13 | 212.8  | 207.79 | 206.05 | 206.83 | 204.41 | 202.12 | 201.6  |
| TCS     | 217.78 | 223.47 | 219.05 | 220.79 | 219.24 | 223.51 | 218.78 | 214.41 | 219.25 | 221.27 |
| contrid | 205.97 | 204.75 | 197.87 | 199.82 | 199.37 | 198.01 | 195.22 | 197.75 | 201.52 | 196.61 |
| motif-3 | 209.05 | 198.64 | 191.93 | 186.88 | 178.68 | 176.44 | 169.09 | 166.16 | 159.11 | 161.07 |

平均最终真相节点数量
|         | 0.01  | 0.0144 | 0.0188 | 0.0233 | 0.0277 | 0.0322 | 0.0366 | 0.0411 | 0.0455 | 0.05   |
| ------- | ----- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| degree  | 91.05 | 95.24  | 110.94 | 134.52 | 159.97 | 192.67 | 211.49 | 229.01 | 243.14 | 256.83 |
| TCS     | 40.9  | 56.87  | 70.85  | 84.03  | 94.92  | 105.62 | 125.25 | 136.22 | 146.82 | 156.95 |
| contrid | 35.11 | 39.36  | 46.23  | 52.55  | 59.96  | 70.22  | 83.02  | 93.67  | 102.66 | 109.11 |
| motif-3 | 81.7  | 107.14 | 135.72 | 156.49 | 174.85 | 194.56 | 206.89 | 226.84 | 237.86 | 254.06 |

平均传播时间
|         | 0.01  | 0.0144 | 0.0188 | 0.0233 | 0.0277 | 0.0322 | 0.0366 | 0.0411 | 0.0455 | 0.05  |
| ------- | ----- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ----- |
| degree  | 9.78  | 8.38   | 9.96   | 9.18   | 9.21   | 9.43   | 9.67   | 9.81   | 10.17  | 9.72  |
| TCS     | 8.95  | 9.73   | 9.29   | 9.48   | 9.75   | 10.34  | 8.53   | 10.44  | 9.71   | 10.49 |
| contrid | 7.78  | 7.81   | 7.07   | 7.71   | 6.91   | 7.98   | 7.03   | 8.31   | 8.67   | 8.23  |
| motif-3 | 10.05 | 9.72   | 9.88   | 9.57   | 10.03  | 9.68   | 9.48   | 10.73  | 10.18  | 11.13 |

> * Uspower网络。参数设置：au_T_rate = 0.005; r_rate = 0.05; T_rate=0.01~0.05. **(结果已修正)**

平均最终谣言节点数量
|         | 0.01   | 0.0144 | 0.0188 | 0.0233 | 0.0277 | 0.0322 | 0.0366 | 0.0411 | 0.0455 | 0.05   |
| ------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| degree  | 764.17 | 746.36 | 747.72 | 730.6  | 728.53 | 723.14 | 710.48 | 718.97 | 703.89 | 698.99 |
| TCS     | 791.19 | 780.71 | 774.91 | 776.71 | 765.24 | 766.7  | 763.58 | 761.06 | 752.13 | 747.97 |
| contrid | 654.63 | 622.12 | 605.62 | 586.43 | 578.15 | 564.52 | 572.25 | 569.35 | 577.48 | 574.76 |
| motif-3 | 734.15 | 701.63 | 670.72 | 629.47 | 620.87 | 596.15 | 576.85 | 557.71 | 531.12 | 517.41 |
Contrid 的初始效果还行，但随后出现了反弹。 感觉 motif-3 还能继续提升。

平均最终真相节点数量
|         | 0.01   | 0.0144 | 0.0188 | 0.0233 | 0.0277 | 0.0322 | 0.0366  | 0.0411  | 0.0455  | 0.05    |
| ------- | ------ | ------ | ------ | ------ | ------ | ------ | ------- | ------- | ------- | ------- |
| degree  | 384.91 | 515.58 | 621.19 | 730.65 | 846.19 | 935.74 | 1038.71 | 1114.37 | 1193.23 | 1274.08 |
| TCS     | 153.53 | 208.32 | 257.57 | 311.42 | 357.41 | 408.88 | 460.82  | 506.08  | 551.02  | 601.29  |
| contrid | 174.34 | 200.78 | 231.64 | 260.69 | 299.24 | 323.81 | 364.12  | 395.31  | 414.63  | 446.96  |
| motif-3 | 321.06 | 427.35 | 524.69 | 618.6  | 694.58 | 761.4  | 848.56  | 906.41  | 995.77  | 1070.31 |

平均传播时间
|         | 0.01  | 0.0144 | 0.0188 | 0.0233 | 0.0277 | 0.0322 | 0.0366 | 0.0411 | 0.0455 | 0.05  |
| ------- | ----- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ----- |
| degree  | 9.91  | 9.94   | 9.95   | 10.23  | 10.44  | 10.35  | 10.11  | 10.06  | 10.31  | 10.05 |
| TCS     | 10.31 | 10.47  | 10.44  | 10.16  | 10.1   | 10.67  | 10.26  | 10.8   | 10.45  | 10.27 |
| contrid | 7.48  | 6.98   | 6.63   | 6.75   | 6.78   | 7.01   | 7.43   | 7.34   | 7.56   | 7.79  |
| motif-3 | 10.39 | 10.32  | 10.14  | 10.93  | 10.18  | 10.23  | 10.54  | 10.16  | 10.91  | 10.37 |

> 综合这两天的实验，motif-3 对谣言的遏制效果总体保持领先，扩散真相的效果接近 degree based 的算法。
> 观察到实验结果出现反弹，研究了一下，是代码的问题。选择 T nodes 的数量，是根据剩余可用点的数量乘以比例，因此当谣言点数量上升时，实际选择的 T nodes 数量是减少的，这也导致了反弹现象的出现。


> 设置 monitoring T nodes。 采用 PE + motif-3 的方法。小小的试验了一下。
> USpower网络，alpha = 0.5; r_rate = 0.05; T_rate=0.01~0.05

|             |            | 0.01   | 0.0144 | 0.0188 | 0.0233 | 0.0277 | 0.0322 | 0.0366 | 0.0411 | 0.0455 | 0.05    |
| ----------- | ---------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------- |
| R_nodes num | motif-3    | 734.15 | 701.63 | 670.72 | 629.47 | 620.87 | 596.15 | 576.85 | 557.71 | 531.12 | 517.41  |
| ^           | PE+motif-3 | 735.4  | 717.4  | 699.4  | 686.32 | 670.26 | 643.19 | 636.36 | 625.04 | 605.95 | 603.27  |
| T_nodes num | motif-3    | 321.06 | 427.35 | 524.69 | 618.6  | 694.58 | 761.4  | 848.56 | 906.41 | 995.77 | 1070.31 |
| ^           | PE+motif-3 | 306.06 | 403.8  | 493.16 | 598.62 | 682.63 | 763.36 | 835.5  | 892.05 | 965.23 | 1046.88 |

可见效果下降了。原因是谣言节点和真相节点的比例都足够大了，基本上不设置 monitoring T nodes，都可在谣言传播后的 time=1 时刻检测到。因此设置 monitoring T nodes 有点浪费budget，导致最终效果变差。
![](res_pic/PE_select_M_T_3d_4_v2.jpg)

> 降低谣言节点的比例。USpower网络中，谣言节点比例为 0.6% ;T_rate=0.008 ~ 0.02.

平均最终谣言节点

|            |           | 0.008 | 0.0093 | 0.0106 | 0.012 | 0.0133 | 0.0146 | 0.016 | 0.0173 | 0.0186 | 0.02  |
| ---------- | --------- | ----- | ------ | ------ | ----- | ------ | ------ | ----- | ------ | ------ | ----- |
|            | contrid   | 92.57 | 92.21  | 91.03  | 94.38 | 92.16  | 92.07  | 90.11 | 90.28  | 90.71  | 94.47 |
|            | motif-3   | 73.88 | 67.97  | 69.13  | 65.79 | 60.69  | 59.86  | 60.15 | 59.7   | 58.32  | 59.11 |
| PE+motif-3 | alpha=0.1 | 74.64 | 68.06  | 65.62  | 62.43 | 59.25  | 55.28  | 55.87 | 54.83  | 50.74  | 52.34 |
| PE+motif-3 | alpha=0.2 | 72.36 | 68.4   | 64.95  | 62.64 | 60.2   | 55.15  | 52.49 | 50.7   | 49.82  | 49.3  |
| PE+motif-3 | alpha=0.3 | 77.25 | 70.66  | 65.81  | 62.51 | 57.53  | 56.72  | 52.55 | 52.58  | 50.14  | 48.81 |
| PE+motif-3 | alpha=0.4 | 75.1  | 72.14  | 71.26  | 67.39 | 62.79  | 58.64  | 57.52 | 55.18  | 52.55  | 51.41 |

平均最终真相节点

|            |           | 0.008  | 0.0093 | 0.0106 | 0.012  | 0.0133 | 0.0146 | 0.016  | 0.0173 | 0.0186 | 0.02   |
| ---------- | --------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
|            | contrid   | 121.28 | 135.52 | 146.39 | 157.71 | 166.83 | 178.54 | 195.94 | 203.03 | 211.26 | 218.05 |
|            | motif-3   | 242.68 | 267.34 | 293.3  | 308.56 | 318.44 | 331.91 | 349.58 | 369.28 | 381.08 | 387.81 |
| PE+motif-3 | alpha=0.1 | 264.72 | 297.99 | 331.96 | 344.22 | 376.51 | 391.47 | 413.75 | 442.48 | 452.12 | 462.98 |
| PE+motif-3 | alpha=0.2 | 292.44 | 328.29 | 359.79 | 384.47 | 421.61 | 447.78 | 467.48 | 500.81 | 514.9  | 530.3  |
| PE+motif-3 | alpha=0.3 | 324.7  | 354.44 | 387.72 | 424.87 | 447.5  | 481.39 | 510.79 | 522.7  | 552.36 | 574.32 |
| PE+motif-3 | alpha=0.4 | 341.56 | 383.77 | 421.78 | 440.84 | 470.2  | 495.84 | 541.83 | 571.54 | 597.73 | 631.32 |

结果图
![](res_pic/PE+motif3_USpower_1.png)

![](res_pic/PE+motif3_USpower_2.png)

alpha=0.2时，纠正谣言的效果最好，之后随着alpha的增大，纠正效果变差；而真相传播则是alpha越大，效果越好。

# 2022年11月23日
> 关于未检测到谣言但传播已经停止的问题，我想试试第一种方案。感觉之前直接加一个常数的方法，并没有体现什么意义。
> 试验了一下，基于度选取 monitoring T nodes。总体趋势跟之前差不多。
> * dolphins网络

![](res_pic/deg_based_select_M_T_3d_1_v3.jpg)

> * food 网络

![](res_pic/deg_based_select_M_T_3d_2_v3.jpg)

> * netscience网络

![](res_pic/deg_based_select_M_T_3d_3_v3.jpg)

> * USpower网络

![](res_pic/deg_based_select_M_T_3d_4_v3.jpg)